## 优秀的哈希函数特点

1. 输入值域是无线的
2. 同一个输入值的输出相同
3. 不同输入值的输出可能相同
4. 不同的输入值对应的输出均匀分布



## 布隆过滤器

### 用处

用于在**允许判断失误**的情况下检验一个值是否出现在**大规模**数据中。

### 是啥

①有一个长度为m的bit型数组(如`vector<bool>(m, false)`)，称为bitmap

②有k个优秀且彼此独立的哈希函数。

③有p的判断失误率（本身不存在但误认为存在）

#### 记录时

对于每一个一个输入对象，用k个哈希函数对其计算，结果对m取余，然后在bitmap上将对应位置设置为1.

#### 查询时

对于输入对象用k个哈希函数对其计算，结果对m取余，在bitmap上查看对应位置

- 若每一个位置都是1，则认为其存在（但仍有可能不存在）
- 假若有一个位置是0，认为其不存在（必然不存在）



### 参数设置

已知：判断容错率p，数据量n

#### bitmap大小 m

$$
m = -\frac{\ln p}{(\ln2)^2	}\times n 
$$

#### 哈希函数数量k(后面是选取了上面的m后简化的)

$$
k = \ln2 \times \frac{m}{n} =  0.7 \times \frac{m}{n} = -\frac{\ln p}{\ln2	}
$$

#### 真实失误率pt(后面是选取了上面的mk后简化的)

$$
pt = (1 - e^{-\frac{nk}{m}})^k = (1 - e^{-ln2})^k = 0.5^{k}
$$

